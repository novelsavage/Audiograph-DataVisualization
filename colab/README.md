# Google Colab用 日本のアーティスト フィーチャリングネットワーク生成

このフォルダには、Google Colabで実行するためのファイルが含まれています。

## セットアップ手順

### 1. Spotify API認証情報の取得

1. [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)にアクセス
2. 新しいアプリを作成
3. Client IDとClient Secretを取得

### 2. Colabでの実行

1. `japanese_artists_network.ipynb`をGoogle Colabで開く
   - Google Driveにアップロードして開く
   - または、GitHubから直接開く
2. **「2. Spotify API認証情報の設定」セル**で、認証情報を入力：
   ```python
   SPOTIFY_CLIENT_ID = "your_client_id_here"
   SPOTIFY_CLIENT_SECRET = "your_client_secret_here"
   ```
3. セルを順番に実行（「すべて実行」でも可）

### 3. 出力ファイルのダウンロード

実行が完了すると、`japanese_featuring_network.json`ファイルが生成されます。
Colabの左側のファイルブラウザから、ファイルを右クリックしてダウンロードできます。

## 処理の流れ

1. **依存関係のインストール**: `spotipy`と`python-dotenv`をインストール
2. **認証情報の設定**: Spotify APIの認証情報を入力
3. **ライブラリのインポート**: 必要なライブラリをインポート
4. **Spotify APIクライアントの初期化**: APIクライアントを設定
5. **定数の設定**: パラメータ（目標アーティスト数など）を設定
6. **関数の定義**: アーティスト取得とネットワーク構築の関数を定義
7. **メイン処理の実行**: 
   - 最新リリースからアーティストを取得（目標60%）
   - 週間チャートから取得
   - バイラルチャートから取得
   - ジャンル検索で取得（目標40%）
8. **ネットワークデータの構築**: フィーチャリング関係を構築
9. **結果の保存**: JSONファイルとして保存

## 注意事項

- **処理時間**: 約1-2時間程度かかる場合があります
- **Colabのセッション**: 90分でタイムアウトする可能性があります。長時間の処理中は、定期的にセルを実行してセッションを維持してください
- **レート制限**: レート制限に達した場合は、約22時間待つ必要があります
- **IPアドレス制限**: 同じIPアドレスから複数のアカウントでアクセスすると、IPベースのレート制限に達する可能性があります

## トラブルシューティング

### レート制限エラーが発生した場合

1. **時間を置いて再実行**: 約22時間待ってから再実行
2. **REQUEST_DELAYを増やす**: 「4. Spotify APIクライアントの初期化」セルで、`REQUEST_DELAY = 0.5`に変更
3. **別のSpotify APIアカウントを使用**: 新しいClient IDとSecretを取得

### セッションがタイムアウトした場合

- Colabのセッションは90分でタイムアウトする可能性があります
- 進捗を保存する機能は現在実装されていません
- 必要に応じて、処理を分割して実行してください
- 定期的にセルを実行してセッションを維持してください

### プレイリストが見つからない（404エラー）場合

- プレイリストIDが変更されている可能性があります
- Spotifyで直接プレイリストを検索して、新しいIDを確認してください
- このエラーは処理を続行できます（他のソースからアーティストを取得します）

## パラメータの調整

「5. 定数の設定」セルで、以下のパラメータを調整できます：

- `TARGET_ARTIST_COUNT`: 目標アーティスト数（デフォルト: 700）
- `MAX_ARTISTS_TO_PROCESS`: 処理する最大アーティスト数（デフォルト: 700）
- `MIN_TRACKS_PER_ARTIST`: 各アーティストから取得する楽曲数（デフォルト: 100）
- `REQUEST_DELAY`: リクエスト間の待機時間（デフォルト: 0.2秒）

