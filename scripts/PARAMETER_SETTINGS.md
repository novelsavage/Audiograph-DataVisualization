# パラメータ設定の説明

## 既存データセット（spotify_featuring_network.json）の規模

- **ノード数**: 525
- **エッジ数**: 500
- **コラボレーション数**: 3,119

## 現在のパラメータ設定（同等規模を目指す）

```python
SEARCH_LIMIT = 150  # 各ジャンルから取得するアーティスト数
MAX_ARTISTS_TO_PROCESS = 400  # 処理する最大アーティスト数
MIN_TRACKS_PER_ARTIST = 50  # 各アーティストから取得する楽曲数
FILTER_BY_FEATURINGS = True  # フィーチャリングがあるアーティストでフィルタリング
```

## パラメータの説明

### SEARCH_LIMIT (150)
- **意味**: 各ジャンル（j-pop, j-rock, j-idol, anime）から取得するアーティスト数
- **合計**: 4ジャンル × 150 = 最大600アーティストが検索される
- **理由**: より多くのアーティスト候補を確保するため

### MAX_ARTISTS_TO_PROCESS (400)
- **意味**: 実際に楽曲を取得して処理する最大アーティスト数
- **理由**: 525ノードを目指すため、400アーティストを処理し、フィーチャリングアーティストも追加されることで525ノードに到達

### MIN_TRACKS_PER_ARTIST (50)
- **意味**: 各アーティストから取得する楽曲数
- **理由**: より多くのコラボレーションを発見するため（3,119コラボレーションを目指す）

### FILTER_BY_FEATURINGS (True)
- **意味**: フィーチャリングがあるアーティストのみを処理する
- **理由**: 無駄なAPI呼び出しを削減し、効率的にデータを取得

## 処理時間の見積もり

### リクエスト数の計算

1. **アーティスト検索**: 4リクエスト（4ジャンル）
2. **フィルタリング**: 400 × 3 × 6 = 7,200リクエスト（最大1,200アーティストを探索、各6リクエスト）
3. **ネットワーク構築**: 400 × 6 = 2,400リクエスト（400アーティスト、各6リクエスト）

**合計: 約9,600リクエスト**

### 処理時間

- **0.3秒/リクエスト**: 約48分
- **0.5秒/リクエスト**: 約80分（より安全）

## パラメータ調整のガイドライン

### ノード数を増やしたい場合

```python
MAX_ARTISTS_TO_PROCESS = 500  # 増加
SEARCH_LIMIT = 200  # 増加（より多くの候補を確保）
```

### エッジ数を増やしたい場合

```python
MIN_TRACKS_PER_ARTIST = 70  # 増加（より多くの楽曲を取得）
```

### 処理時間を短縮したい場合

```python
MAX_ARTISTS_TO_PROCESS = 300  # 減少
MIN_TRACKS_PER_ARTIST = 40  # 減少
FILTER_BY_FEATURINGS = True  # フィルタリングを有効化（効率化）
```

### より安全に実行したい場合（レート制限エラーを避ける）

```python
REQUEST_DELAY = 0.5  # 0.3から0.5に増加（scripts/fetch_japanese_artists.pyの上部）
```

## 実行前の確認事項

1. **時間的余裕**: 約1時間程度の処理時間を確保
2. **API認証**: `.env`ファイルに`SPOTIFY_CLIENT_ID`と`SPOTIFY_CLIENT_SECRET`が設定されているか確認
3. **ネットワーク接続**: 安定したインターネット接続が必要
4. **ディスク容量**: 出力ファイルは数MB程度になる可能性があります

## 実行後の確認

実行後、以下の値を確認してください：

- **ノード数**: 525前後を目指す
- **エッジ数**: 500前後を目指す
- **コラボレーション数**: 3,000前後を目指す

目標値に達していない場合は、パラメータを調整して再実行してください。

